export const SUPPORTED_LANGUAGES = [
  { code: 'zh-CN', label: '简体中文 (Simplified Chinese)' },
  { code: 'zh-TW', label: '繁體中文 (Traditional Chinese)' },
  { code: 'en-US', label: 'English (US)' },
  { code: 'en-GB', label: 'English (UK)' },
];

export const DEFAULT_LANGUAGE = 'zh-CN';

const TRANSLATIONS = {
  'zh-CN': {
    overlayTitle: 'Minecraft',
    splashText: '大功告成！',
    overlayIntro: '点击「单人游戏」进入这个实验性世界。',
    menuSingleplayer: '单人游戏',
    menuPlayOnline: '在线体验',
    menuMultiplayer: '多人游戏',
    menuOptions: '选项…',
    menuQuit: '退出游戏',
    optionsTitle: '控制方式',
    languageLabel: '语言 / Language',
    helpMouse: '鼠标：视角',
    helpMovement: 'WASD：移动，空格：跳跃',
    helpSprint: 'Ctrl：冲刺，Shift（创造模式）：下降',
    helpBreak: '左键：破坏方块（长按生存模式）',
    helpPlace: '右键：放置方块',
    helpTool: 'F 键：切换工具',
    helpMode: 'V 键：切换生存/创造模式',
    helpSelect: '数字键 1-{maxBlock}{zeroHint}：选择方块类型',
    helpSelectZero: '（0=第10格）',
    helpTouchMove: '触控左侧摇杆：移动',
    helpTouchLook: '触控右侧：观察视角 / 交互',
    helpTouchActions: '触控按钮：跳跃、破坏、放置方块',
    saveSuccess: '已保存世界',
    saveError: '无法保存：本地存储不可用',
    welcome: '欢迎来到方块世界',
    blockOption: '{index}. {label}',
    editionLabel: '典藏版',
    shaderLabel: '支持着色器',
    versionLabel: 'Minecraft 1.8.8',
    resourceLabel: '资源来源：Mojang AB',
    multiplayerUnavailable: '目前仅支持单人模式，敬请期待！',
    quitUnavailable: '网页无法直接退出，请关闭或刷新页面。',
    playOnlineStatus: '将在新标签页打开在线版本。',
    optionsShown: '已显示控制说明。',
    optionsHidden: '已隐藏控制说明。',
    hudMode: '模式：{mode}',
    hudTool: '工具：{tool}',
    hudHintTool: 'F：切换工具',
    hudHintMode: 'V：切换生存/创造',
    toolHand: '徒手',
    toolWoodPick: '木镐',
    toolWoodShovel: '木铲',
    toolWoodAxe: '木斧',
    toolShears: '剪刀',
    modeSurvival: '生存',
    modeCreative: '创造',
    modeSwitched: '已切换至 {mode} 模式',
    toolSelected: '当前工具：{tool}',
    lanHostTitle: '局域网房主',
    lanHostHint: '生成提议代码并在同一网络中共享。',
    lanCreateOffer: '生成提议',
    lanOfferPlaceholder: '提议生成后会显示在此处',
    lanCopyOffer: '复制提议',
    lanClearOffer: '重置',
    lanAnswerLabel: '房主：将好友返回的回答粘贴到这里',
    lanAnswerPlaceholder: '粘贴回答，点击应用以完成握手',
    lanAcceptAnswer: '应用回答',
    lanJoinTitle: '加入局域网世界',
    lanJoinHint: '粘贴房主分享的提议并生成回答。',
    lanJoinOfferLabel: '访客：粘贴房主的提议',
    lanJoinOfferPlaceholder: '在此处粘贴房主提供的提议代码',
    lanGenerateAnswer: '生成回答',
    lanJoinAnswerPlaceholder: '将这个回答发回给房主完成连接',
    lanCopyAnswer: '复制回答',
    lanClearJoin: '重置',
    lanDisconnect: '断开连接',
    lanStatusTitle: '联机状态',
    lanStatusIdle: '准备就绪：选择「生成提议」或粘贴好友的提议开始。',
    lanStatusOfferReady: '提议已生成，请将其发送给好友并等待回答。',
    lanStatusAwaitAnswer: '等待回答… 将好友的回答粘贴到左侧。',
    lanStatusAnswerReady: '回答已生成，请将其发回房主。',
    lanStatusConnecting: '正在握手…',
    lanStatusConnected: '已连接 {count} 位玩家。',
    lanStatusDisconnected: '连接已断开。',
    lanStatusCopyOk: '已复制到剪贴板。',
    lanStatusCopyFail: '复制失败，请手动选择文本。',
    lanStatusInvalidSignal: '信令格式无效，请确认粘贴内容。',
    lanPanelOpened: '局域网联机面板已展开。',
    lanPanelClosed: '局域网联机面板已收起。',
    lanPeerSelf: '你（{mode}）',
    lanPeerOther: '玩家 {index}（{mode}）',
    mobileJump: '跳跃',
    mobileBreak: '破坏',
    mobilePlace: '放置',
    mobileTool: '工具',
    mobileMode: '模式',
  },
  'zh-TW': {
    overlayTitle: 'Minecraft',
    splashText: '大功告成！',
    overlayIntro: '點擊「單人遊戲」進入這個實驗性世界。',
    menuSingleplayer: '單人遊戲',
    menuPlayOnline: '線上體驗',
    menuMultiplayer: '多人遊戲',
    menuOptions: '選項…',
    menuQuit: '結束遊戲',
    optionsTitle: '操作方式',
    languageLabel: '語言 / Language',
    helpMouse: '滑鼠：視角',
    helpMovement: 'WASD：移動，空白鍵：跳躍',
    helpSprint: 'Ctrl：衝刺，Shift（創造模式）：下降',
    helpBreak: '左鍵：破壞方塊（生存模式需長按）',
    helpPlace: '右鍵：放置方塊',
    helpTool: 'F 鍵：切換工具',
    helpMode: 'V 鍵：切換生存/創造模式',
    helpSelect: '數字鍵 1-{maxBlock}{zeroHint}：選擇方塊類型',
    helpSelectZero: '（0=第10格）',
    helpTouchMove: '觸控左側搖桿：移動',
    helpTouchLook: '觸控右側：調整視角 / 互動',
    helpTouchActions: '觸控按鈕：跳躍、破壞、放置方塊',
    saveSuccess: '世界已儲存',
    saveError: '無法儲存：無法使用本機儲存空間',
    welcome: '歡迎來到方塊世界',
    blockOption: '{index}. {label}',
    editionLabel: '典藏版',
    shaderLabel: '支援著色器',
    versionLabel: 'Minecraft 1.8.8',
    resourceLabel: '資源來源：Mojang AB',
    multiplayerUnavailable: '目前僅支援單人模式，敬請期待！',
    quitUnavailable: '無法直接離開網頁，請關閉或重新整理。',
    playOnlineStatus: '即將在新分頁開啟線上版本。',
    optionsShown: '已顯示操作說明。',
    optionsHidden: '已隱藏操作說明。',
    hudMode: '模式：{mode}',
    hudTool: '工具：{tool}',
    hudHintTool: 'F：切換工具',
    hudHintMode: 'V：切換生存/創造',
    toolHand: '徒手',
    toolWoodPick: '木鎬',
    toolWoodShovel: '木鏟',
    toolWoodAxe: '木斧',
    toolShears: '剪刀',
    modeSurvival: '生存',
    modeCreative: '創造',
    modeSwitched: '已切換到 {mode} 模式',
    toolSelected: '目前工具：{tool}',
    lanHostTitle: '區域網主機',
    lanHostHint: '產生提議碼並分享給同一網路中的玩家。',
    lanCreateOffer: '產生提議',
    lanOfferPlaceholder: '提議產生後會顯示在這裡',
    lanCopyOffer: '複製提議',
    lanClearOffer: '重設',
    lanAnswerLabel: '主機：將好友回傳的回答貼在此處',
    lanAnswerPlaceholder: '貼上回答後點選「套用」完成握手',
    lanAcceptAnswer: '套用回答',
    lanJoinTitle: '加入區域網世界',
    lanJoinHint: '貼上主機分享的提議並產生回答。',
    lanJoinOfferLabel: '訪客：貼上主機的提議',
    lanJoinOfferPlaceholder: '在此貼上主機提供的提議碼',
    lanGenerateAnswer: '產生回答',
    lanJoinAnswerPlaceholder: '將此回答交給主機完成連線',
    lanCopyAnswer: '複製回答',
    lanClearJoin: '重設',
    lanDisconnect: '斷開連線',
    lanStatusTitle: '連線狀態',
    lanStatusIdle: '準備就緒：請產生提議或貼上好友的提議。',
    lanStatusOfferReady: '提議已生成，請分享給好友並等待回答。',
    lanStatusAwaitAnswer: '等待回答… 將好友的回答貼回左側。',
    lanStatusAnswerReady: '回答已生成，請傳給主機。',
    lanStatusConnecting: '正在握手…',
    lanStatusConnected: '已連線 {count} 位玩家。',
    lanStatusDisconnected: '連線已中斷。',
    lanStatusCopyOk: '已複製到剪貼簿。',
    lanStatusCopyFail: '複製失敗，請手動選取文字。',
    lanStatusInvalidSignal: '信令格式無效，請確認貼上的內容。',
    lanPanelOpened: '已開啟區域網面板。',
    lanPanelClosed: '已關閉區域網面板。',
    lanPeerSelf: '你（{mode}）',
    lanPeerOther: '玩家 {index}（{mode}）',
    mobileJump: '跳躍',
    mobileBreak: '破壞',
    mobilePlace: '放置',
    mobileTool: '工具',
    mobileMode: '模式',
  },
  'en-US': {
    overlayTitle: 'Minecraft',
    splashText: "It's finished!",
    overlayIntro: 'Click “Singleplayer” to jump into this experimental world.',
    menuSingleplayer: 'Singleplayer',
    menuPlayOnline: 'Play Online',
    menuMultiplayer: 'Multiplayer',
    menuOptions: 'Options...',
    menuQuit: 'Quit Game',
    optionsTitle: 'Controls',
    languageLabel: 'Language',
    helpMouse: 'Mouse: Look around',
    helpMovement: 'WASD: Move, Space: Jump',
    helpSprint: 'Ctrl: Sprint, Shift (Creative): Descend',
    helpBreak: 'Left Click: Break block (hold in Survival)',
    helpPlace: 'Right Click: Place block',
    helpTool: 'F: Cycle tools',
    helpMode: 'V: Toggle Survival/Creative',
    helpSelect: 'Number Keys 1-{maxBlock}{zeroHint}: Select block type',
    helpSelectZero: ' (0 selects slot 10)',
    helpTouchMove: 'Touch left stick: move',
    helpTouchLook: 'Touch right side: look / interact',
    helpTouchActions: 'Tap buttons: jump, mine, place blocks',
    saveSuccess: 'World saved',
    saveError: 'Unable to save: localStorage not available',
    welcome: 'Welcome to the voxel world',
    blockOption: '{index}. {label}',
    editionLabel: "Collector's Edition",
    shaderLabel: 'FOR Shaders',
    versionLabel: 'Minecraft 1.8.8',
    resourceLabel: 'Resources: Mojang AB',
    multiplayerUnavailable: 'Multiplayer is not implemented yet.',
    quitUnavailable: 'Quit closes the tab in the real game — refresh to exit here.',
    playOnlineStatus: 'Opening the hosted build in a new tab…',
    optionsShown: 'Control guide opened.',
    optionsHidden: 'Control guide hidden.',
    hudMode: 'Mode: {mode}',
    hudTool: 'Tool: {tool}',
    hudHintTool: 'F: Cycle tools',
    hudHintMode: 'V: Toggle Survival/Creative',
    toolHand: 'Hand',
    toolWoodPick: 'Wooden Pickaxe',
    toolWoodShovel: 'Wooden Shovel',
    toolWoodAxe: 'Wooden Axe',
    toolShears: 'Shears',
    modeSurvival: 'Survival',
    modeCreative: 'Creative',
    modeSwitched: 'Switched to {mode} mode',
    toolSelected: 'Selected tool: {tool}',
    lanHostTitle: 'Host a LAN world',
    lanHostHint: 'Generate an offer and share it with players on your network.',
    lanCreateOffer: 'Create Offer',
    lanOfferPlaceholder: 'Your host offer will appear here',
    lanCopyOffer: 'Copy Offer',
    lanClearOffer: 'Reset',
    lanAnswerLabel: 'Host: paste the guest answer here',
    lanAnswerPlaceholder: 'Paste the answer then click Apply to finish pairing',
    lanAcceptAnswer: 'Apply Answer',
    lanJoinTitle: 'Join a LAN host',
    lanJoinHint: 'Paste the host offer to generate your response.',
    lanJoinOfferLabel: 'Guest: paste the host offer',
    lanJoinOfferPlaceholder: 'Paste the offer shared by your host',
    lanGenerateAnswer: 'Generate Answer',
    lanJoinAnswerPlaceholder: 'Return this answer to the host to connect',
    lanCopyAnswer: 'Copy Answer',
    lanClearJoin: 'Reset',
    lanDisconnect: 'Disconnect',
    lanStatusTitle: 'Connection status',
    lanStatusIdle: 'Ready: create an offer or paste one from a friend to begin.',
    lanStatusOfferReady: 'Offer ready—share it with friends and await their answer.',
    lanStatusAwaitAnswer: 'Waiting for an answer… paste it on the left once received.',
    lanStatusAnswerReady: 'Answer ready—send it back to the host.',
    lanStatusConnecting: 'Pairing over LAN…',
    lanStatusConnected: 'Connected to {count} player(s).',
    lanStatusDisconnected: 'Connection closed.',
    lanStatusCopyOk: 'Copied to clipboard.',
    lanStatusCopyFail: 'Copy failed—select the text manually.',
    lanStatusInvalidSignal: 'Invalid signal payload. Please check the pasted text.',
    lanPanelOpened: 'LAN multiplayer panel opened.',
    lanPanelClosed: 'LAN multiplayer panel closed.',
    lanPeerSelf: 'You ({mode})',
    lanPeerOther: 'Player {index} ({mode})',
    mobileJump: 'Jump',
    mobileBreak: 'Mine',
    mobilePlace: 'Place',
    mobileTool: 'Tools',
    mobileMode: 'Mode',
  },
  'en-GB': {
    overlayTitle: 'Minecraft',
    splashText: "It's finished!",
    overlayIntro: 'Click “Singleplayer” to explore this experimental world.',
    menuSingleplayer: 'Singleplayer',
    menuPlayOnline: 'Play Online',
    menuMultiplayer: 'Multiplayer',
    menuOptions: 'Options...',
    menuQuit: 'Quit Game',
    optionsTitle: 'Controls',
    languageLabel: 'Language',
    helpMouse: 'Mouse: Adjust view',
    helpMovement: 'WASD: Move, Space: Jump',
    helpSprint: 'Ctrl: Sprint, Shift (Creative): Descend',
    helpBreak: 'Left Click: Break block (hold in Survival)',
    helpPlace: 'Right Click: Place block',
    helpTool: 'F: Cycle tools',
    helpMode: 'V: Toggle Survival/Creative',
    helpSelect: 'Number Keys 1-{maxBlock}{zeroHint}: Choose block type',
    helpSelectZero: ' (0 selects slot 10)',
    helpTouchMove: 'Touch left stick: move',
    helpTouchLook: 'Touch right side: look / interact',
    helpTouchActions: 'Tap buttons: jump, mine, place blocks',
    saveSuccess: 'World saved',
    saveError: 'Unable to save: local storage unavailable',
    welcome: 'Welcome to the voxel world',
    blockOption: '{index}. {label}',
    editionLabel: "Collector's Edition",
    shaderLabel: 'FOR Shaders',
    versionLabel: 'Minecraft 1.8.8',
    resourceLabel: 'Resources: Mojang AB',
    multiplayerUnavailable: 'Multiplayer has not been added yet.',
    quitUnavailable: 'Quit would close the window — refresh the page instead.',
    playOnlineStatus: 'Opening the hosted build in a new tab…',
    optionsShown: 'Control guide opened.',
    optionsHidden: 'Control guide hidden.',
    hudMode: 'Mode: {mode}',
    hudTool: 'Tool: {tool}',
    hudHintTool: 'F: Cycle tools',
    hudHintMode: 'V: Toggle Survival/Creative',
    toolHand: 'Hand',
    toolWoodPick: 'Wooden Pickaxe',
    toolWoodShovel: 'Wooden Shovel',
    toolWoodAxe: 'Wooden Axe',
    toolShears: 'Shears',
    modeSurvival: 'Survival',
    modeCreative: 'Creative',
    modeSwitched: 'Switched to {mode} mode',
    toolSelected: 'Selected tool: {tool}',
    lanHostTitle: 'Host a LAN world',
    lanHostHint: 'Generate an offer and share it with players on your network.',
    lanCreateOffer: 'Create Offer',
    lanOfferPlaceholder: 'Your host offer will appear here',
    lanCopyOffer: 'Copy Offer',
    lanClearOffer: 'Reset',
    lanAnswerLabel: 'Host: paste the guest answer here',
    lanAnswerPlaceholder: 'Paste the answer then select Apply to finish pairing',
    lanAcceptAnswer: 'Apply Answer',
    lanJoinTitle: 'Join a LAN host',
    lanJoinHint: 'Paste the host offer to generate your response.',
    lanJoinOfferLabel: 'Guest: paste the host offer',
    lanJoinOfferPlaceholder: 'Paste the offer shared by your host',
    lanGenerateAnswer: 'Generate Answer',
    lanJoinAnswerPlaceholder: 'Return this answer to the host to connect',
    lanCopyAnswer: 'Copy Answer',
    lanClearJoin: 'Reset',
    lanDisconnect: 'Disconnect',
    lanStatusTitle: 'Connection status',
    lanStatusIdle: 'Ready: create an offer or paste one from a friend to begin.',
    lanStatusOfferReady: 'Offer ready—share it with friends and await their answer.',
    lanStatusAwaitAnswer: 'Waiting for an answer… paste it on the left once received.',
    lanStatusAnswerReady: 'Answer ready—send it back to the host.',
    lanStatusConnecting: 'Pairing over LAN…',
    lanStatusConnected: 'Connected to {count} player(s).',
    lanStatusDisconnected: 'Connection closed.',
    lanStatusCopyOk: 'Copied to clipboard.',
    lanStatusCopyFail: 'Copy failed—select the text manually.',
    lanStatusInvalidSignal: 'Invalid signal payload. Please check the pasted text.',
    lanPanelOpened: 'LAN multiplayer panel opened.',
    lanPanelClosed: 'LAN multiplayer panel closed.',
    lanPeerSelf: 'You ({mode})',
    lanPeerOther: 'Player {index} ({mode})',
    mobileJump: 'Jump',
    mobileBreak: 'Mine',
    mobilePlace: 'Place',
    mobileTool: 'Tools',
    mobileMode: 'Mode',
  },
};

export function getStrings(locale) {
  return TRANSLATIONS[locale] ?? TRANSLATIONS[DEFAULT_LANGUAGE];
}

export function getMessage(locale, key, replacements = {}) {
  const baseStrings = getStrings(locale);
  const fallbackStrings = getStrings(DEFAULT_LANGUAGE);
  const template = baseStrings[key] ?? fallbackStrings[key] ?? '';
  return template.replace(/\{(\w+)\}/g, (match, name) => {
    return Object.prototype.hasOwnProperty.call(replacements, name)
      ? String(replacements[name])
      : match;
  });
}

export function validateLanguage(code) {
  return SUPPORTED_LANGUAGES.some((lang) => lang.code === code)
    ? code
    : DEFAULT_LANGUAGE;
}
